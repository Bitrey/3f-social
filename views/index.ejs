<%- include ('./partials/header') %>

<div class="container">
    <div class="row">

        <div class="col-12 col-lg-4">
            <div id="chat">
                <div id="chat-window">
                    <div class="alert alert-danger" role="alert">
                        Scrivi lo username e il messaggio!
                    </div>
                    <div id="output">
                        <div class="text-center">
                            <p id="loading" class="text-center pt-3">Caricamento dei messaggi</p>
                            <div class="spinner-border text-primary" role="status">
                                <span class="sr-only">Caricamento...</span>
                            </div>
                        </div>
                    </div>
                    <div id="feedback"></div>
                </div>
                <input id="username" type="text" placeholder="Username" maxlength="16" required>
                <textarea id="message" type="text" placeholder="Messaggio" maxlength="300" required></textarea>
                <button id="img">Immagine...</button>
                <button id="send">Invia</button>
            </div>
        </div>

        <div class="col-12 col-lg-8">
            <% posts.forEach(function(post){ %>
            <div class="post card bg-light m-3">
                <img style="float: left;" class="post-img my-1 ml-1 mr-3" src="<%= post.immagine %>"
                    alt="Immagine del post">
                <div class="card-body">
                    <h5 class="card-title"><%= post.titolo %></h5>
                    <p class="card-text"><%= post.contenuto %></p>
                    <p class="card-text">
                        <small class="text-muted">
                            <%= ("0" + post.dataCreazione.getHours()).slice(-2) %>:<%= (post.dataCreazione.getMinutes()<10?'0':'') + post.dataCreazione.getMinutes() %>
                            <%= ("0" + post.dataCreazione.getDate()).slice(-2) %>/<%= ("0" + (post.dataCreazione.getMonth() + 1)).slice(-2) %>/<%= post.dataCreazione.getFullYear() %>
                        </small>
                    </p>
                </div>
            </div>
            <% }) %>
        </div>
    </div>

</div>

<script src="/js/chat.js"></script>

<%- include ('./partials/footer') %>